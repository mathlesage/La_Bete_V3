# ===================================================================
# Styles spécifiques pour la génération des positifs
# ===================================================================
styles_pour_positifs:
  - key: "urgent"
    instruction: "Adopte un ton direct et urgent."
  - key: "intrigant"
    instruction: "Adopte un ton intrigante et mystérieuse."
  - key: "simplifie"
    instruction: "Utilise un langage extrêmement simple et clair."
  - key: "professionnel"
    instruction: "Adopte un ton formel et professionnel."
  - key: "decontracte"
    instruction: "Adopte un ton décontracté et informel."
  - key: "interrogatif"
    instruction: "Adopte un ton interrogatif."
  - key: "bullet_points"
    instruction: "Utilise des bullets points."
  - key: "brouillon"
    instruction: "Adopte un style brouillon non terminé."
  - key: "standard"
    instruction: "Adopte un ton neutre et standard."
  - key: "creatif"
    instruction: "Adopte un ton créatif et imagé."
  - key: "factuel"
    instruction: "Adopte un ton factuel et précis."
  - key: "didactique"
    instruction: "Adopte un ton didactique."

# ===================================================================
# Stratégies de génération pour les textes "positifs"
# ===================================================================
strategies:
  generate_title:
    key: "generate_title"
    word_count_range: [4, 8]
    prompt: |
      "Votre mission est de créer un titre pour l'extrait de texte suivant. Le titre doit être un résumé ultra-factuel et concis du contenu fourni, et rien d'autre.

      ## Texte à titrer
      ---
      {anchor_text}
      ---

      ## Règles impératives

      1.  **Périmètre strict :** Le titre doit **exclusivement** concerner les informations présentes dans le texte ci-dessus. Considérez cet extrait comme un document complet. Ne supposez PAS qu'il fait partie d'un article plus long. Votre titre doit porter sur l'extrait lui-même, pas sur un sujet plus large que vous pourriez deviner.

      2.  **Zéro hallucination :** N'ajoutez, n'inventez, et ne déduisez **AUCUNE** information qui n'est pas explicitement écrite dans le texte. Chaque concept du titre doit être directement traçable à une phrase du texte.
          *   **Exemple de ce qu'il ne faut PAS faire :** Si le texte décrit un site écologique sans nommer la ville, n'ajoutez pas de nom de ville dans le titre.

      3.  **Contenu du titre :**
          *   **Idée centrale :** Résumez l'idée principale de manière neutre et précise.
          *   **Factuel :** Ne donnez pas d'opinion, ne faites pas de marketing.

      4.  **Format de la réponse :**
          *   **Longueur :** Environ {word_count} mots.
          *   **Sortie :** Ne retournez QUE le titre. Pas de préambule, pas de \"Titre :\", juste le texte du titre."
  paraphrase_changement_vocabulaire:
    key: "paraphrase_changement_vocabulaire"
    prompt: |
        "Rôle : Tu es un réécrivain expert, chargé de métamorphoser un texte sur le plan stylistique tout en garantissant une fidélité sémantique absolue.

        Objectif : Produire une nouvelle version (`Candidat`) du `Texte original` qui en est le clone sémantique parfait, mais avec une forme (vocabulaire, syntaxe, structure) radicalement différente.

        **RÈGLES CRITIQUES (NON NÉGOCIABLES) :**

        1.  **FIDÉLITÉ SÉMANTIQUE ABSOLUE :**
            *   Le `Candidat` doit être 100% identique en sens au `Texte original`.
            *   **INTERDICTION FORMELLE** d'ajouter, omettre, inventer ou déduire la moindre information.
            *   **VÉRIFICATION DES FAITS :** Les **entités nommées** (personnes, lieux, organisations), les **dates**, les **chiffres**, et les **termes techniques ou spécifiques** (ex: 'drapeau', 'AOP beurre d'Isigny') doivent être conservés **À L'IDENTIQUE**. Ne les remplace JAMAIS par un synonyme ou un terme approchant (ex: ne change pas 'drapeau' en 'blason', 'commune' en 'village' si le texte source dit 'commune').

        2.  **COMPLÉTUDE :**
            *   Le `Candidat` doit reformuler l'**INTÉGRALITÉ** du `Texte original`. Ta réponse ne doit jamais être tronquée.

        **INSTRUCTIONS DE RÉÉCRITURE STYLISTIQUE :**

        1.  **TRANSFORMATION PROFONDE :** Ne te contente pas de remplacer des mots par des synonymes. Tu dois activement restructurer les phrases et les paragraphes.
            *   **Techniques suggérées :** Change l'ordre des propositions, passe de la voix active à la voix passive (et vice-versa), fusionne des phrases courtes, scinde des phrases longues.

        2.  **STYLE SPÉCIFIQUE :** Applique obligatoirement la consigne de style suivante : {style_instruction}

        **PROCESSUS À SUIVRE :**
        1.  **Analyse :** Lis et comprends parfaitement le `Texte original` et identifie les éléments factuels à préserver.
        2.  **Réécriture :** Applique les instructions de transformation stylistique pour créer une nouvelle version.
        3.  **Vérification finale :** Relis attentivement ton `Candidat` et compare-le au `Texte original` pour t'assurer que toutes les règles (sémantique, faits, complétude) sont scrupuleusement respectées.

        Texte original :
        ---
        {anchor_text}
        ---

        Réponse attendue : Uniquement le texte réécrit, sans préambule ni explication."
    
    requires_style: true

  paraphrase_longue_fidele:
    key: "paraphrase_longue"
    prompt: |
      Effectue une paraphrase approfondie du long texte suivant pour produire un nouveau texte, conservant toutes les idées mais avec une formulation entièrement originale, sans mots en commun, une structure et un ordre des idées différents.
      Instruction de Style pour la réécriture : {style_instruction}
      Texte original : --- {anchor_text} ---
      Ne renvoie que le nouveau texte, sans aucune autre information.
    requires_style: true

  paraphrase_similaire:
    key: "paraphrase_similaire"
    prompt: |
        "Votre objectif est de réaliser une transformation profonde du texte fourni, et non une simple reformulation. La réécriture doit conserver le sens essentiel de l'original tout en étant radicalement différente dans sa structure et son vocabulaire.\n\n**Règles impératives à suivre :**\n\n1.  **Interdiction de la paraphrase de surface :** Ne vous contentez pas de remplacer des mots par leurs synonymes. La structure de la phrase doit être entièrement repensée.\n2.  **Modification structurelle obligatoire :** Vous devez déconstruire la syntaxe originale. Par exemple :\n    *   Fusionnez des phrases courtes pour en créer une plus complexe.\n    *   Divisez une phrase longue en plusieurs phrases plus courtes et directes.\n    *   Changez l'ordre des propositions et des arguments.\n    *   Passez de la voix active à la voix passive (ou inversement).\n\n**Stratégies de transformation encouragées :**\n\n*   **Changer de perspective :** Adoptez le point de vue d'un personnage ou d'un acteur mentionné.\n*   **Changer le format :** Transformez un texte déclaratif en une série de questions, une liste à puces, ou un dialogue simulé.\n*   **Changer le ton :** Appliquez l'instruction de style ci-dessous. Passez d'un ton neutre à un ton plus engagé, humoristique, ou critique.\n*   **Synthétiser ou développer :** Soit vous extrayez et reformulez l'idée centrale de manière très concise, soit vous développez un aspect du texte en y ajoutant des détails pertinents.\n\n**Instruction de Style pour la réécriture :** {style_instruction}\n\n**Texte original :**\n--- {anchor_text} ---\n\nNe renvoyez que le nouveau texte, sans aucune autre information."}

    requires_style: true

  resume_court_avec_style:
    key: "resume_court_avec_style"
    word_count_range: [10, 20]
    prompt: |
        Tu es un agent de traitement de texte ultra-précis. Ta mission est de créer un résumé court et stylisé en suivant un protocole strict. Ton seul univers est le texte fourni.

        **RÈGLE CARDINALE : LA FIDÉLITÉ ABSOLUE**
        Ton unique objectif est de reformuler les informations **EXPLICITEMENT PRÉSENTES** dans le texte source. Tu n'as aucune connaissance du monde extérieur.
        *   **INTERDICTION FORMELLE :** N'ajoute AUCUN fait, AUCUN détail, AUCUNE déduction, même si cela te semble logique ou améliore le texte. Ton résumé doit être 100% traçable au texte source.

        **PROTOCOLE DE GÉNÉRATION :**

        1.  **EXTRACTION :** Lis le texte source et identifie uniquement les informations essentielles qui y sont écrites.
        2.  **RÉÉCRITURE SANS AJOUT :** Reformule ces informations de manière concise. Ne fais que condenser et réorganiser ce qui est déjà là.
        3.  **MISE EN FORME :**
            *   **Style :** Applique l'instruction de style suivante : **{style_instruction}**
            *   **Longueur :** Vise environ **{word_count}** mots.
            *   **Format :** Produis UNIQUEMENT le texte brut du résumé. Pas de titre, pas de préambule, pas de puces (`*`, `-`), pas d'explications.
            

        **Texte à résumer :**
        ---
        {anchor_text}
        ---
    requires_style: true

  resume_moyen_avec_style:
    key: "resume_moyen_avec_style"
    word_count_range: [20, 30]
    prompt: |
          "Vous êtes un robot d'archivage ultra-précis. Votre seule fonction est de synthétiser un document en respectant des règles strictes. Vous opérez dans un système d'information clos : le `Texte Source` est votre unique univers de connaissance.\n\n**Mission :** Créer un résumé d'environ `{word_count}` mots à partir du `Texte Source`. Ce résumé doit être sémantiquement identique à l'original, mais reformulé en profondeur et présenté avec un style spécifique.\n\n---\n\n**PROTOCOLE DE SÉCURITÉ (NON-NÉGOCIABLE)**\n\n1.  **PRINCIPE DU MONDE CLOS :** Le `Texte Source` est la seule et unique source d'information autorisée. Toute information, même si elle est factuellement correcte mais absente du texte, est une contamination et un échec.\n    *   **Exemple :** Si le texte dit \"La Tour Eiffel est à Paris\", vous ne pouvez PAS ajouter qu'elle a été construite par Gustave Eiffel, car ce n'est pas dans le texte.\n\n2.  **ANTI-HALLUCINATION :** N'ajoutez, n'inventez, n'inférez et ne complétez JAMAIS les informations. Votre résumé doit être une réorganisation des faits *exclusivement* présents dans le `Texte Source`.\n **REFORMULATION PROFONDE :** Ne vous contentez pas de copier-coller ou de changer quelques mots. Vous devez transformer la structure des phrases et utiliser un vocabulaire varié pour éviter une paraphrase triviale.\n    *   **Objectif :** Le résumé doit se lire comme un texte original, pas comme une simple copie réarrangée. \n\n4.  **APPLICATION DU STYLE :** Appliquez l'instruction de style suivante : **{style_instruction}**.\n    *   **Priorité :** Le style est important, mais il ne doit JAMAIS vous faire enfreindre les règles 1 et 2. La fidélité au contenu prime sur le style. Si le style demande de l'humour mais que le texte est factuel, rapportez les faits sans ajouter de blague.\n\n---\n\n**Texte Source :**\n---\n{anchor_text}\n---\n\nGénérez uniquement le résumé final."
    requires_style: true

  elaboration_longue_depuis_medium:
    key: "elaboration_longue_depuis_medium"
    word_count_range: [50, 100]
    prompt: |
        Tu es un expert en réécriture créative. Ta mission est de prendre le `Texte de base` et de le développer pour créer un nouveau texte d'environ {word_count} mots, en changeant radicalement son style.\n\n**Règles Impératives à suivre scrupuleusement :**\n\n1.  **CONSERVATION INTÉGRALE DES FAITS :** C'est la règle la plus importante et non négociable. Toutes les informations factuelles, chiffrées et spécifiques du texte original DOIVENT être méticuleusement conservées et présentes dans ta réécriture. Cela inclut, sans s'y limiter : les noms propres (personnes, lieux, organisations), les dates, les chiffres, les statistiques, les pourcentages, les données techniques, etc. Ne remplace jamais un fait précis par une abstraction ou une généralité.\n\n2.  **ÉLABORATION SANS INVENTION :** Pour atteindre la longueur cible, tu dois développer les idées présentes, ajouter des descriptions, reformuler les phrases de manière plus riche et créer des transitions fluides. Tu dois enrichir le texte autour des faits existants, mais il est formellement interdit d'inventer de nouvelles informations factuelles qui ne sont pas explicitement dans le texte source.\n\n3.  **TRANSFORMATION STYLISTIQUE PROFONDE :** Change complètement la structure des phrases, le vocabulaire et le ton général pour correspondre à l'instruction de style fournie. Le nouveau texte doit sembler écrit par un auteur différent.\n\n4.  **FIDÉLITÉ AU SENS :** Malgré la transformation stylistique, le sens global et les informations clés du texte original doivent rester parfaitement intacts et reconnaissables.\n\n**Instruction de Style à appliquer :** {style_instruction}\n\n**Texte de base :**\n--- \n{anchor_text}\n---\n\nNe renvoie que le nouveau texte, sans aucune introduction ni commentaire."
    requires_style: true

  elaboration_medium_depuis_court:
    key: "elaboration_medium_depuis_court"
    word_count_range: [100, 300]
    prompt: |
        "Votre mission est de développer un texte court (l'ANCRE) en un texte plus élaboré d'environ {word_count} mots (le CANDIDAT).\n\n**RÈGLE D'OR ABSOLUE : LA FIDÉLITÉ SÉMANTIQUE**\nC'est le critère le plus important. Le candidat doit être une expansion de l'ancre, pas une création.\n1.  **CONSERVATION INTÉGRALE :** 100% des informations, faits, chiffres, noms et idées de l'ancre DOIVENT se retrouver dans le candidat.\n2.  **AUCUNE INVENTION :** N'ajoutez JAMAIS d'informations, de faits ou de détails qui ne sont pas explicitement présents ou directement déductibles de l'ancre. Votre connaissance du monde extérieur ne doit pas être utilisée pour ajouter du contenu.\n\n**OBJECTIF : TRANSFORMATION DE LA FORME**\nVotre but est de réorganiser et d'enrichir la présentation de l'information, pas l'information elle-même.\n*   **ÉLABORER, PAS INVENTER :** L'allongement provient de l'ajout de transitions, de la création de liens logiques entre les idées de l'ancre, et du développement d'un style plus riche. Pensez à \"déplier\" ou \"étoffer\" le contenu existant.\n*   **CHANGEMENT RADICAL :** La structure et le style du candidat doivent être très différents de ceux de l'ancre. Évitez la simple paraphrase.\n\n**PROCESSUS GUIDÉ :**\n\n1.  **ANALYSE :** Lisez l'ancre et identifiez chaque \"brique d'information\" qu'elle contient. C'est votre inventaire de contenu obligatoire et exhaustif.\n\n2.  **RECONSTRUCTION CRÉATIVE :** Construisez un nouveau texte en utilisant TOUTES les briques de l'étape 1, et SEULEMENT celles-ci. Vous pouvez par exemple :\n    *   Transformer une liste de faits en un récit ou une chronologie.\n    *   Transformer des affirmations en une exploration via des questions rhétoriques (dont les réponses sont dans l'ancre).\n    *   Adopter un ton ou un point de vue (éditorial, didactique, narratif) pour présenter les faits.\n\n3.  **APPLICATION DU STYLE :** Intégrez l'instruction de style suivante de manière fluide et naturelle : **{style_instruction}**\n\n4.  **VÉRIFICATION FINALE :** Avant de produire votre réponse, comparez-la à l'ancre. Avez-vous bien inclus TOUTES les informations de l'ancre ? Avez-vous ajouté des informations qui n'y figuraient pas ? Si oui, corrigez.\n\n**Ancre à transformer :**\n--- {anchor_text} ---\n\nNe retournez que le texte réécrit."
    requires_style: true

# ===================================================================
# Configuration des "Recettes" par Catégorie
# ===================================================================
recettes_par_categorie:
  long:
    - strategie: generate_title
      poids: 20
    - strategie: resume_court_avec_style
      poids: 60
    - strategie: resume_moyen_avec_style
      poids: 10
    - strategie: paraphrase_longue_fidele
      poids: 10

  medium:
    - strategie: generate_title
      poids: 20
    - strategie: resume_court_avec_style
      poids: 40
    - strategie: resume_moyen_avec_style
      poids: 10
    - strategie: paraphrase_changement_vocabulaire
      poids: 20
    - strategie: elaboration_longue_depuis_medium
      poids: 10

  short:
    - strategie: generate_title
      poids: 30
    - strategie: paraphrase_similaire
      poids: 50
    - strategie: elaboration_medium_depuis_court
      poids: 20

llm:
  rotation:
    - model: "openai/gpt-4.1-nano"
      provider: "openai"
    - model: "google/gemini-2.5-flash-lite"
      provider: "google-vertex"
    - model: "meta-llama/llama-4-maverick"
      provider: "lambda"


    
